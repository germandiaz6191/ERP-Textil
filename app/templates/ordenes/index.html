{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between mb-4">
    <h1>Órdenes de Producción</h1>
    <a href="{{ url_for('ordenes.nueva') }}" class="btn btn-primary">Nueva Orden</a>
</div>
<div class="card">
    <div class="card-body">
        <table class="table">
            <thead>
                <tr><th>Número</th><th>Referencia</th><th>Cantidad</th><th>Estado</th><th>Progreso</th><th>Acciones</th></tr>
            </thead>
            <tbody>
                {% for orden in ordenes %}
                <tr>
                    <td>{{ orden.numero_orden }}</td>
                    <td>{{ orden.referencia.nombre }}</td>
                    <td>{{ orden.cantidad }}</td>
                    <td><span class="badge bg-{{ 'success' if orden.estado == 'Terminada' else 'primary' }}">{{ orden.estado }}</span></td>
                    <td><div class="progress"><div class="progress-bar" style="width: {{ orden.progreso }}%">{{ orden.progreso|int }}%</div></div></td>
                    <td><a href="{{ url_for('ordenes.ver', id=orden.id) }}" class="btn btn-sm btn-info">Ver</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
